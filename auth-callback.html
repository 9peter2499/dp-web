<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Authenticating...</title>
</head>
<body class="p-8">
  <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>

  <script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.35.0/+esm';
  import { SUPABASE_URL, SUPABASE_ANON_KEY } from './config.js';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // (debug) ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏π‡πÉ‡∏ô console
  console.log('üîç Checking persisted session‚Ä¶');
  try {
    const { data: { session }, error } = await supabase.auth.getSession();
    console.log('üëâ getSession ‚Üí', session, error);

    if (session) {
      window.location.replace('/tors.html');
    } else {
      window.location.replace('/login.html');
    }
  } catch (err) {
    console.error('‚ùå Error getting session:', err);
    window.location.replace('/login.html');
  }
</script>

</body>
</html>
